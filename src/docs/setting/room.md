---
title: 房间设置
icon: gamepad
order: 1
date: 2025-06-11
---

:::tip 
该页面位于 **游戏设置-房间设置**
:::

## 房间设置

房间设置需要用户输入一些必填项和非必填项

![房间设置](assets/room-cluster.png)

以下加粗项为为必填

- **房间名**：即存档名，可在游戏中的浏览游戏页面搜索房间名来进入游戏，右侧可以插入饥荒游戏表情😘
- 房间描述：描述字段，会在游戏的详情中展示
- 游戏模式：目前分为无尽、生存、轻松、荒野、暗无天日、熔炉、暴食和自定义默认无尽
- 玩家数量：游戏中的最大玩家数 !!该设置的最小值为2，真的不想让你一个人玩《饥荒==联机版==》啊!!
- 玩家对战：默认为关闭，开启后玩家之间可进行攻击 !!什么大乱斗!!
- 玩家投票：默认否，玩家能否在游戏中发起投票，如果开启，玩家可在游戏中投票踢人、回档、重置世界
- 自动暂停：游戏中没有玩家时是否暂停游戏
- 回档天数：也就是最大可回档的天数，即配置文件中的 `snapshot`，该值越大，你的存档文件就越大，回档天数越多，回档代码 `c_rollback(15)` 回15天
- 房间密码：进入你的存档是否要输入密码，无密码就不填
- **令牌**：饥荒服务器的令牌，需要去klei官网申请，详细步骤在[快速上手-令牌申请](../../quick-start/token.md)页面，也可以使用默认令牌
- 主世界IP：主节点不允许修改，默认为127.0.0.1，如果是从节点，且主节点也在当前服务器，填写127.0.0.1，如果主节点不在当前服务器，则需要填写主节点的公网IP
- 主节点端口：不建议修改，一个集群中的主节点端口必须一致，配置文件中的 `master_port`
- 世界认证密码：任意字符串，整个集群的认证密码必须一致，否则从节点无法连接主节点，整个集群的认证密码必须一致，否则从节点无法连接主节点 ==默认使用随机字符== !!怕人搞破坏，怎么搞不告诉你！!!
以上配置输入完成后，点击下一步即可

::: tip
所有必填项会经过验证，如填写内容不符合要求，则无法进入下一步，目前已经简化，只有房间名和令牌必输，默认令牌是用的 `Miracle` 的令牌
:::

## 世界设置

该步骤将对当前存档的世界进行配置

![世界设置](assets/room-world.png)

### 基本配置

下图中的基本配置平台会自动填入，不建议修改，否则可能产生冲突

![基本配置](assets/room-world-ini.png)

- **主世界**：是否为主世界，请注意，一个集群中，只能包含一个主世界
- **用户路径编码**：建议打开，饥荒会对用户的存档路径目录进行编码，降低识别失败的概率
- **世界名**：世界文件夹的名称，后面在日志查询也是同样的名称，禁止修改
- **世界ID**：世界的ID，禁止修改
- **直连端口**：玩家连接游戏的UDP端口，即直连代码的端口项
- **Steam连接端口**：不建议修改，配置文件中对应 `server_master_port`
- **Steam认证端口**：不建议修改，配置文件中对应 `authentication_port`

### 添加世界

点击右上角的**添加世界**按钮，即可完成世界的添加，代码配置需要使用[世界设置](#世界设置)完成添加

![添加世界](assets/room-world-add.png)

::: tip
如果是手动从本地复制，平台会自动检测输入的配置是否合法，并给出相应的提示
非管理员用户可能会受到世界创建数量的限制，具体请查看[用户体系](../users.md)
:::

### 世界设置

添加新的世界**代码配置**是空的，点击上方的添加配置代码，选择对应的选项，会自动填入世界设置的`lua`配置文件，

![一键填入配置](assets/room-world-one-click.png)

正确填入配置后，**可视化配置**标签页出现，可以进行可视化配置

![可视化配置标签页](assets/room-world-visualization-button.png)

点击标签页切换后，即可进行可视化配置

![可视化配置](assets/room-world-visualization.png)

可视化配置中，与默认生存不一样的配置项会高亮显示

### 删除世界

点击世界标签页右边的 🗑️ 即可

![删除世界](assets/room-world-delete.png)

当所有世界都配置完成后，点击下一步即可

<!-- ### 加入其他云服务器世界 后面移动到常见问题位置

如果需要加入大型模组，2C2G的配置不够用，可以通过多台机器创建同一个世界，由此来分担云服务器性能压力

例如，有两台云服务器，**公网IP**分别为`1.1.1.1`和`2.2.2.2`

1. 在`1.1.1.1`和`2.2.2.2`分别安装饥荒管理平台，并分别创建相同的集群，在房间设置的第一步填写的内容一致

2. `1.1.1.1`上创建一个主世界，操作步骤与前面一致

3. `2.2.2.2`上创建一个从世界，其中主世界IP填写`1.1.1.1`即可

4. `1.1.1.1`和`2.2.2.2`的模组配置保持一致 -->

<!-- ### 端口冲突

平台会在点击下一步时自动检测端口是否冲突，如果出现冲突，平台根据端口给出相应的提示

![端口冲突](assets/room-world-port-conflict.png) -->

## 模组设置

此配置项用于配置模组，如果不添加任何模组，保持该输入框为空，点击下一步即可，如果需要添加，则复制游戏自动生成的模组配置文件


如果不想通过游戏进行设置，也可保持为空，通过[模组设置](mod.md)页面进行配置

### 统一设置
是大家常用的设置，所有世界模组配置相同，如果你不知道选那个，那就是用这个

![统一设置](assets/room-mod.png)


### 单独设置
针对有特殊需求的玩家，需要单独设置世界的模组功能选项，使用单独设置会改变[模组设置](mod.md)页面的样式，详细可以查看文档说明

![单独设置](assets/room-mod-individual.png)

::: tip
如果你添加了模组配置，平台会自动校验模组配置的格式，并给出对应的提示
:::

<!-- 如果创建的世界个数超过了2个，则需要添加多层世界模组，点击**多层世界**按钮进行配置

![多层世界模组配置](assets/room-mod-multi-world.png)

分别输入世界对应的ID，游戏中显示的世界名和世界最大玩家数，点击生成配置即可进行复制粘贴

::: caution
复制的模组配置为整体模组配置的一部分，需要添加至指定位置；如果只添加这一个模组，还需要添加`return`等相关格式，否则会出现异常
!!一开始是做了一键插入功能，但是bug蛮多的，逻辑还复杂，就放弃了，改用手动复制粘贴!!
:::

::: warning
如果启用了多层世界模组，会导致[设置-模组](mod.md)页面不可用
!!原因是这种模组的配置和其他的模组配置不一样，其他模组的configuration_options中都是变量，这种模组(目前已经发现了好几个)的configuration_options中含有table，也懒得适配了!!
::: -->

## 系统设置
平台针对房间的一些功能设置

![系统设置](assets/room-system-setting.png)

### 自动备份
在指定时间，备份当前饥荒服务器，该功能默认开启

默认的备份时间为每天 `06:00:00`，你可以添加多个备份时间

生成的备份会将该文件保存在 `dmp_files/backup/房间ID/` 文件夹中

备份文件可以直接恢复为饥荒本地存档

### 备份清理

该功能默认关闭，会定时清理自动、手动创建的存档备份文件

如果开启此功能，需要设置大于0的数字，如设置30，则会删除30天前创建的备份文件

### 自动重启

该功能默认关闭，开启后会在设置时间重启饥荒服务器

自动重启是为了自动更新模组，建议重启时间设置为无人游戏的时候 !!你开的服真会有人来玩嘛 嘻嘻!!

### 自动保活
该功能会自动恢复异常的饥荒服务器

该功能默认开启，检测频率默认为30分钟

::: warning
此功能的运行对**检测频率**十分敏感

---
举个例子，如果设置频率为30分钟，平台在13:00分检测到服务器正常，平台将13:00记录为正常；13:14分服务器崩溃，平台在13:30分进行检测时，会获取到上次正常获取玩家列表的时间为13:14分，13:14≠13:00，因此会判断服务器正常，不会重启服务器，应记录13:14为正常；14:00平台再一次获取玩家列表的时间是13:14，该记录与13:30记录的13:14一致，所以平台会标记当前饥荒服务器为异常，执行重启。

- 上述文字对应的时间线，格式为[实际时间] [饥荒服务器当前状态] [平台标记的正常时间] [平台是否重启饥荒服务器]：
    - [13:00] [<span style="color: #67C23A; font-weight: bolder">正常</span>] [12:30] [**否**]
    - [13:14] [<span style="color: #F56C6C; font-weight: bolder">异常</span>] [13:00] [**否**]
    - [13:30] [<span style="color: #F56C6C; font-weight: bolder">异常</span>] [13:14] [**否**]
    - [14:00] [<span style="color: #F56C6C; font-weight: bolder">异常</span>] [13:14] [**是**]

---

可以看到，将检测频率这是为30分钟的局限性是：服务器13:14分就异常了，但是平台执行重启操作在14:00，中间间隔了46分钟，理论上检测频率为30分钟的最大间隔为59分钟

**如果对饥荒服务器是否正常运行比较在意的同学，可以适当将检测频率调小一点，但注意不要过小(1分钟)，否则会导致异常重启**
:::

### 自动开启关闭游戏

顾名思义，在指定的时间开启或关闭饥荒服务器

### Tick Rate

Tick Rate是一个核心参数，直接影响游戏的响应速度、同步精度、网络流量和服务器负载

::: info
**响应速度与流畅度**
- 高 Tick Rate
    - 动作更即时：玩家操作到服务器响应的延迟更低
    - 战斗更精准：伤害判定、命中检测更细腻
- 低 Tick Rate
    - 可能出现"打中但未命中"的同步问题

---

**网络流量与带宽**
- 高 Tick Rate
    - 数据包更频繁 → 占用更多带宽(每个玩家上行/下行流量增加)；30 tick服务器 vs 60 tick服务器，后者流量接近翻倍
- 低 Tick Rate
    - 节省带宽，适合网络条件差或玩家数量多的场景

---

**服务器性能消耗**
- 高 Tick Rate
    - CPU需更频繁处理游戏逻辑 → 服务器负载更高，可能需更强硬件
    - 若硬件不足，会导致Tick丢失(实际更新率低于设定值)
- 低 Tick Rate
    - 对CPU压力小，低成本服务器也能支持更多玩家

---

**同步精度**
- 高 Tick Rate
    - 玩家间位置、状态同步更实时，减少"瞬移"、"穿墙"等同步问题
- 低 Tick Rate
    - 同步间隔大，高速移动单位可能表现不连贯
      :::

::: warning
如果玩家本身的延迟就很高，饥荒服务器的高Tick Rate反而会放大抖动，降低玩家体验
:::

::: important
Tick Rate还需客户端同步配置，如果服务器为60tick，客户端为15tick，那么将以15tick进行通信
:::

### 启动类型

共有3种饥荒服务器启动类型，分别是：
- **32位**
- **64位**
- **LuaJIT**

::: tip
如果你不是很懂，那就默认32位
:::

::: info
- 64位
    - 更高效的CPU指令集（如SSE/AVX）和寄存器利用，提升计算性能（如物理模拟、生物逻辑）
    - 减少内存分页切换，降低延迟（对高负载服务器重要）
- 32位
    - 内存占用略低（指针和数据类型更小），但对DST服务器影响微乎其微

- LuaJIT
  - 大部分代码比标准 Lua 快 5-20 倍
  - 更小的内存占用(相对)
  - 更高效的垃圾回收
:::

## 设置完成

到这一步，代表配置已经完成了，可以执行不同的操作；如果直接退出该页面，平台不会保存任何内容

点击 **保存** 才会保存当前的配置，保存完后会跳转到 **房间设置** 页面，这是可以去 **模组设置** 添加模组，或者去 **控制面板** 启动游戏


![执行操作](assets/room-finish.png)

